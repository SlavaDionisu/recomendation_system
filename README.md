# Ркомендательная система постов в социальной сети

## Описание

Этот сервис может для каждого пользователя по его ID в любой момент времени возвращать посты, которые ему покажут в его ленте соцсети.  
Данные о пользователях, постах и их взаимодействиях хранятся в соответствующих таблицах. Набор данных фиксирован, новых данных не появляется. Модель обучена на имеющихся данных и не обучается в процессе использования. Дополнительно сделаны рекомендации для новых пользователей.  
Обработка данных: выделены новые признаки у постов, такие, как рейтинг поста (соотношение лайков к просмотрам). Тексты постов векторизованы при промощи модели RoBERTa. Для уменьшения размерности полученных данных и ускорения обучения методом главных компонент определено количество компонент, объясняющих 95% дисперсии, PCA произведен на оптимальном количестве компонент.  
Работа сервиса: пользователю будут рекомендовать только посты, которые он еще не видел. Модель Catboost предсказывает вероятности того, что пользователь лайкнет тот или иной пост, далее посты ранжируются по вероятности лайка и возвращается необходимое количесво (по умолчанию 5).  
Технические ограничения: среднее время работы одного запроса не более 0,5 секунд, ограничения по памяти не больше, чем 4 гб RAM на запуск. 

## Необходимо
- Python 3.8.5
- pip

## Установка

1. Скопируйте репозиторий:
```bash
git clone https://github.com/SlavaDionisu/recomendation_system.git
cd recomendation_system
```
2. Установите необходимые зависимости:  
```bash
pip install -r requirements.txt 
``` 
3. Запустите основной код для запуска рекомендательной системы:  
```bash
python src/main.py
```

## Структура проекта
recommendation_system/  
│  
├── data/                                      # папка для хранения данных  
│   ├── users.csv                              # пользователи соцсети  
│   ├── posts.csv                              # посты соцсети  
│   └── feeds.csv                              # история взаимодействия юзеров с постами  
│  
├── recommendation_system/  
│   ├── recomendation_system_with_vectors.py   # основной скрипт рекомендательной системы  
│   └── catboost_model_with_vectors            # модель  
│  
├── src/                  
│   ├── main.py                                # входная точка запуска приложения  
│   └── schema.py                              # схема API  
│  
├── .gitignore                                 # файл для исключения отслеживания файлов  
├── README.md                                  # описание проекта  
└── requirements.txt                           # файл с зависимостями проекта  

## Структура таблиц
Таблица users. Cодержит информацию о всех пользователях соц.сети.

Колонки:
- age - возраст пользователя (в профиле)
- city - город пользователя (в профиле)
- country - страна пользователя (в профиле)
- exp_group - экспериментальная группа: некоторая зашифрованная категория
- gender - пол пользователя
- user_id - уникальный идентификатор пользователя
- os - операционная система устройства, с которого происходит пользование соц.сетью
- source - пришел ли пользователь в приложение с органического трафика или с рекламы

Таблица posts. Содержит информацию о постах и уникальный ID каждой единицы с соответствующим ей текстом и темой поста.

Колонки:
- id - уникальный идентификатор поста
- text - текстовое содержание поста
- topic - основная тематика

Таблица feeds. Содержит историю о просмотренных постах для каждого юзера в изучаемый период.

Колонки:
- timestamp - время, когда был произведен просмотр
- user_id - id пользователя, который совершил просмотр
- post_id - id просмотренного поста
- action - тип действия: просмотр или лайк
- target - 1 у просмотров, если почти сразу после просмотра был совершен лайк, иначе 0. У действий like пропущенное значение.